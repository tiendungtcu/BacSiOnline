@using Tm.Data.ViewModels.Patient
@model PatientProfile
@{
    ViewBag.Title = "Chi tiết";
    Layout = "~/Views/Shared/_PatientLayout.cshtml";
}

            <!-- MAIN CONTENT-->
<div class="main-content">
    <div class="card">
        <div class="card-header" style="text-align: center; font-size: 20px;
                        text-transform: uppercase; background: #BFD7EA; color: black">
            <strong>Hồ sơ người dùng</strong>
        </div>

        <div class="card-body card-block">
            <!-- <div class="col-md-12" style="padding-bottom: 20px">
                <strong>Thông tin cá nhân</strong>
            </div> -->
@using (Html.BeginForm("Update", "PatientProfile", new { area = "Patient" }, FormMethod.Post, new { }))
{
                <div class="row form-group">
                    <div class="col-md-9">
                        <fieldset class="form-control">
                            <legend>Thông tin cá nhân</legend>
                            <div class="row form-group">
                                <div class="col-md-2">
                                    <p>Họ và tên:</p>
                                </div>
                                <div class="col-md-10">
                                    @Html.TextBoxFor(model => model.FullName, new { @class="form-control",@style = "text-transform: uppercase", required="true" })                          
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-md-2">
                                    <p>Giới tính:</p>
                                </div>
                                <div class="col-md-4">
                                    @Html.RadioButtonFor(m=>m.Gender,"M") Nam
                                    @Html.RadioButtonFor(m => m.Gender, "F") Nữ
                                    @Html.RadioButtonFor(m => m.Gender, "O") Khác                                 
                                </div>

                                <div class="col-md-2">
                                    <label for="dob-input" class="form-control-label">Ngày sinh:</label>
                                </div>
                                <div class="col-md-4">                                  
                                    @Html.TextBoxFor(m => m.DoB, "{0:yyyy-MM-dd}", new { type = "date", @class ="form-control"})                    
                                </div>
                            </div>
                    @foreach (var item in Model.Addresses)
                    {
                        <div class="row form-group">
                            <div class="col-md-2">
                                <p>Địa chỉ:</p>
                            </div>
                            <div class="col-md-2">
                                <label for="street-input" class="form-control-label">Số nhà, đường</label>
                            </div>
                            <div class="col-md-8">
                                @Html.TextBoxFor(modelItem=>item.Address,new { @class= "form-control" , placeholder = "Nhập vào chi tiết số nhà, ngõ, đường phố" })
                            </div>
                        </div>

                            <div class="row form-group">
                                <div class="col-md-8" style="text-align: right">
                                    <label for="province-input" class="form-control-label">Tỉnh thành</label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBoxFor(modelItem=>item.ProvinceName,new { @class="form-control"})
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-md-8" style="text-align: right">
                                    <label for="district-input" class="form-control-label">Quận, huyện</label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBoxFor(modelItem => item.DistrictName, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-md-8" style="text-align: right">
                                    <label for="ward-input" class="form-control-label">Xã, phường, thị trấn</label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBoxFor(modelItem => item.WardName, new { @class = "form-control" })
                                </div>
                            </div>
                    }
                           

                            <div class="row form-group">
                                <div class="col-md-2">
                                    <label for="idcard-input" class="form-control-label">
                                        CMND
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBoxFor(model => model.IdentityCard, new { @class = "form-control" })
                                    
                                </div>
                                <div class="col-md-2">
                                    <label for="insurance-input" class="form-control-label">
                                        Thẻ bảo hiểm
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBoxFor(model => model.AssuranceCard, new { @class = "form-control" })
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <!-- <div class="col-md-3">
                        <label for="" class="">Họ và tên:</label>
                    </div>
                    <div class="col-md-6">
                        <p id="name-label" style="text-transform: uppercase">Lưu Hoàng Nhân</p>
                    </div> -->
                    <div class="col-md-3">
                        <div class="center-image div-image">
                            <img src="~/Content/Common/images/icon/default_avatar_male.jpg" id="avatar-holder" alt="@Model.Avatar" style="margin: auto;">
                        </div>
                        <div style="display: block; margin: auto; text-align: center">
                            <label id="avatar-input" style="padding-top: 10px"><i class="fa fa-cloud-upload-alt"></i> Thay ảnh đại diện...<input type="file" style="opacity: 0; position: absolute;"></label>
                            <input type="hidden" name="avatar-link" value="">
                        </div>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col-md-9">
                        <fieldset class="form-control">
                            <legend>Thông tin liên hệ</legend>
                            <div class="row form-group">
                                <div class="col-md-2">
                                    <label for="phone-input" class="form-control-label" style="text-align: right">
                                        Số điện thoại(*):
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBoxFor(m=>m.PhoneNumber,new { @class="form-control",required="true"})                      
                                </div>
                                <div class="col-md-2">
                                    <label for="email-input" class="form-control-label">
                                        Email:
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.TextBoxFor(m => m.Email, new { @class="form-control"})                                   
                                </div>
                            </div>

                        </fieldset>
                    </div>
                </div>

                <div class="col-md-12" style="text-align: right">
                    <button type="submit" class="btn btn-primary">Cập nhật</button>
                    <button type="button" id="pwd-collapse" class="btn btn-danger">Trở về</button>
                </div>
}

            <div class="row">
                <div class="col-md-12">
                    <button type="button" class="btn btn-link" id="change-password"><i class="zmdi zmdi-grain"></i> Đổi mật khẩu</button>
                    <!-- <a href="" id="change-password"><i class="zmdi zmdi-grain"></i> Đổi mật khẩu</a> -->
                </div>
            </div>
            <!-- </form>  -->
            <div class="row form-group">
                <div class="col-md-12">
@using (Html.BeginForm("ChangePassword", "PatientProfile", new { area = "Patient" }, FormMethod.Post, new { }))
{
                        <fieldset class="form-control" id="change-password-panel" style="display: none;">
                            <legend>Thông tin đổi mật khẩu</legend>
                            <div class="row form-group">
                                <div class="col-md-5" style="text-align: right">
                                    <label for="old-pwd-input" class="form-control-label">
                                        Mật khẩu cũ:
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.PasswordFor(m => m.OldPassword, new { @class = "form-control", required = "true" })
                                    
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-md-5" style="text-align: right">
                                    <label for="new-pwd-input" class="form-control-label">
                                        Mật khẩu mới:
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.PasswordFor(m => m.NewPassword, new { @class = "form-control", required = "true" })             
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-md-5" style="text-align: right">
                                    <label for="confirm-pwd-input" class="form-control-label">
                                        Xác nhân mật khẩu mới:
                                    </label>
                                </div>
                                <div class="col-md-4">
                                    @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", required = "true" })
                                    
                                </div>
                            </div>

                            <div class="col-md-12" style="text-align: right">
                                <button type="submit" class="btn btn-primary">Đổi mật khẩu</button>
                                <button type="reset" id="pwd-collapse" class="btn btn-danger">Hủy</button>
                            </div>

                        </fieldset>
}
                </div>
            </div>
        </div>

    </div>
</div>   

@section Scripts{
<script type="text/javascript">
        $(document).ready(function(){
            $("#change-password").click(function(){
                $("#change-password-panel").slideToggle("fast");
            });

            $("#pwd-collapse").click(function(){
                $("#change-password-panel").slideUp("fast");
            });
        });
</script>    
    
}